---
title: "Контроль версий в командной разработке ПО"
description: "Система контроля версий — это программный инструмент, который облегчает и упрощает процесс разработки ПО."
---

# Система контроля версий

_Система контроля версий (СКВ, VCS)_ — это один из ключевых инструментов разработки, позволяющий наладить непрерывную интеграцию и развертывание ПО ([CI/CD](https://cloud.yandex.ru/ru/blog/posts/2022/10/ci-cd)) в процессе работы над проектом. СКВ фиксирует все изменения в проекте, позволяет сохранять различные его версии, а при необходимости вернуться к нужному состоянию. Это защищает исходный код от непреднамеренного удаления или повреждения. Также система контроля версий помогает организовать удобную командную работу над проектом, делая процесс более гибким и безопасным.

Преимущества использования системы контроля версий:

* **История изменений**

  СКВ позволяет проследить историю изменений в файлах проекта. Можно легко узнать, когда, кем и зачем был создан, удален или отредактирован какой-либо файл в репозитории. Это облегчает процесс поиска ошибок и отладки кода, помогает избежать путаницы и конфликтов.

* **Защита исходного кода**

  СКВ предотвращает случайное или намеренное удаление, а также изменение важных файлов или функций, что может привести к нарушению работы программы.

* **Возможность отката**

  СКВ позволяет восстанавливать предыдущие версии кода. Это может быть необходимо в случае ошибки или для сравнения с текущей версией.

* **Командная работа**

  С помощью СКВ удобно организовывать совместную работу над проектом. Каждый участник может выполнять свою часть работы, а система помогает объединять результаты.

## Развитие систем контроля версий {#history}

С появлением компьютеров в жизни людей появилась и необходимость сохранять промежуточные результаты своей работы. Это нужно, чтобы в случае обнаруженной ошибки не пришлось переделывать всю работу с самого начала.

В самом простом варианте промежуточные версии можно сохранить с помощью создания копии нужного файла. Этот способ может быть удобен, когда размер рабочего файла небольшой и с ним работает только один человек.

В современном мире разработка ПО — это сложный процесс, который требует участия множества специалистов. При этом возникает необходимость в инструменте, который обеспечивает эффективное взаимодействие всех членов команды, а также управляет изменениями, вносимыми в проект. Таким инструментом и стала система контроля версий. В настоящее время СКВ — важнейший инструмент, без которого невозможно представить командную работу над проектом.

### Локальные системы контроля версий {#local}

В 1970-х годах была создана первая система контроля версий — SCCS. Она позволяла отслеживать изменения в файлах проекта и сохранять их историю.

С развитием технологий СКВ стали больше удовлетворять запросам разработчиков, стали сложнее и функциональнее. СКВ научились сравнивать версии файлов, создавать патчи, а также выполнять автоматическое слияние изменений. Это стало серьезным прогрессом в организации процесса разработки ПО. Так в 1982 году была разработана RCS. Эта система была совместима с Linux, имела открытый исходный код, а также более простой пользовательский интерфейс.

Специфика СКВ локального типа — это хранение как исходного кода, так и всех его версий в одном месте — на компьютере разработчика. Эта особенность является одновременно и главным минусом таких систем. В случае сбоя может быть потеряна не только какая-то из версий, но и весь проект целиком. Кроме того, локальные СКВ неудобны для организации командной разработки ПО.

### Централизованные системы контроля версий {#centralized}

Централизованные системы контроля версий — следующее поколение СКВ — в отличие от предшественников поддерживают возможность командной работы. Такие системы предполагают хранение проекта на едином сервере. Чтобы изменить исходный код, разработчик должен скачать с сервера необходимые файлы и исправить их, а затем вернуть эти файлы на сервер. Это позволяет организовать совместную работу над проектом, где каждый из разработчиков работает с какой-либо скопированной частью исходного кода.

Первая централизованная система версий — CVS — была разработана в 1986 году. Также к централизованным СКВ относятся [Subversion](#popular) и Perforce.

Недостатком централизованных СКВ является уязвимость сервера. В случае сбоя на сервере или проблем с подключением к нему, данные могут быть потеряны или недоступны сразу для всех разработчиков.

### Распределенные системы контроля версий {#distributed}

Очередным этапом развития систем контроля версий стало создание распределенных СКВ. Системы такого типа позволили избавиться от основного недостатка централизованных СКВ — уязвимости сервера. В распределенной версии СКВ каждый разработчик скачивает с сервера не только нужный ему файл, но и весь набор данных. Таким образом, при сбое на сервере восстановить данные можно будет с компьютера любого из разработчиков.
К таким системам относится разработанный в 2003 году Darcs, а также [Git](#popular), [Mercurial](#popular) и Bazaar, разработанные в 2005 году.

В настоящее время системы контроля версий такого типа используются чаще всего и являются стандартом в командной разработке ПО.

## Принципы работы системы контроля версий {#principles}

Рассмотрим основные понятия, необходимые для понимания принципа работы системы контроля версий.

### Репозиторий {#repository}

_Репозиторий_ — это централизованное хранилище всего процесса. Как правило, репозиторий находится на удаленном сервере в облачном хранилище. 

Чтобы начать работу с проектом, необходимо скачать полную копию репозитория на свой компьютер. Такая копия называется _локальным репозиторием_.

СКВ обменивается изменениями между этими репозиториями. Так все изменения, внесенные в облачный репозиторий, могут быть загружены в локальный, и наоборот.

### Коммит {#commit}

СКВ помогает сохранять так называемые «снимки» состояния проекта, его промежуточные версии. Это своего рода опорные точки, к которым разработчик может вернуться в случае необходимости. Такие сохранения называются _коммитами_. Коммиты содержат информацию о том, какие изменения были внесены в исходный код, но не весь проект целиком. Таким образом система контроля версий может сохранять большое количество изменений с минимальными затратами на ресурсы.

### Ветвление {#branch}

_Ветка_ — это специальная, созданная параллельно с основным репозиторием, копия проекта. Ветвление позволяет изолировать изменения, экспериментировать с новыми функциями и исправлять ошибки, не влияя на стабильность основной базы кода — master-ветку.

<center>

![branch](../_assets/glossary/vcs-branch.svg)

</center>

Основные этапы работы с ветками:

1. Создание новой ветки в репозитории. Для этого от уже существующей в репозитории ветки — master-ветки или любой другой — откалывают новую ветку.
1. Работа с файлами проекта, сохранение изменений и создание коммитов в созданной ветке.
1. Создание _пулл реквеста_ (_Pull Request_) — запроса на сохранение в родительской ветке изменений, которые были внесены в рабочую ветку. В пулл реквесте другие разработчики могут обсудить правки, добавить свои коммиты при необходимости, принять или отклонить предложенные изменения.
1. _Мердж_ (_Merge_) веток — рабочую ветку вливают в родительскую. Теперь изменения внесены и доступны всем пользователям.

 Ветвление позволяет организовать командную разработку проекта. Поскольку разработчики делают коммиты в специально созданных ветках, исходный код защищен от ошибок или случайного удаления. Ветвление полезно, если нужно внести изменения, которые могут повлиять на другие части проекта. Кроме того, оно позволяет протестировать новые функции перед их интеграцией в master-ветку.

### Решение конфликтов {#conflicts}

При слиянии ветвей могут возникать конфликты, когда изменения в разных ветвях затрагивают одни и те же файлы. В таком случае СКВ автоматически решает конфликт или предлагает разработчику выбрать актуальную версию. Это может усложнить процесс слияния и увеличить вероятность ошибок. 

Но несмотря на это, СКВ остается неотъемлемым элементом CI/CD разработки. Она позволяет организовать удобный формат командной работы над проектом, когда отслеживается история изменений всех файлов и есть возможность при необходимости вернуться к одной из предыдущих версий.

## Использование систем контроля версий в разработке {#development}

Системы контроля версий создавались для помощи в организации процесса разработки ПО. Но они могут быть полезны и в других областях: 

* для отслеживания изменений в технической документации;
* для отслеживания изменений в результатах научных исследований;
* для управления контентом и изменениями файлов;
* для организации командной работы с большим количеством файлов.

Но все же применение систем контроля версий в разработке ПО — наиболее распространенная и в настоящее время уже стандартная практика.

### Популярные системы контроля версий {#popular}

Существует [несколько десятков СКВ](https://en.wikipedia.org/wiki/List_of_version-control_software). Чаще всего используют Git, Subversion и Mercurial. Эти СКВ решают задачу организации разработки ПО и имеют схожий набор функций, но отличаются по некоторым критериям, рассмотренным в таблице ниже.

#|
|| **Параметры** | **Git** | **Subversion** | **Mercurial** ||

|| Тип СКВ |

Распределенная |

Централизованная |

Распределенная ||

|| Быстродействие |

Отличное даже при работе с большими репозиториями |

Могут быть проблемы при работе с большими репозиториями |

Отличное даже при работе с большими репозиториями ||

|| Ветвление и слияние |

Поддерживается |

Поддерживается, но может быть громоздким |

Поддерживается ||

|| Популярность ([по данным опроса разработчиков 2022 года](https://survey.stackoverflow.co/2022/#version-control-version-control-system)) |

Используют 94% разработчиков |

Используют 5% разработчиков |

Используют 1% разработчиков ||

|| Контроль доступа |

Зависит от платформы хостинга |

Детализированный контроль доступа |

Зависит от платформы хостинга ||
|#

### Этапы работы с системой контроля версий {#stages}

Работа с СКВ происходит в несколько этапов:

1. Создание репозитория.

   Разработчик создает новый репозиторий — каталог для хранения всех файлов проекта. Это можно сделать с помощью команд `git init`, `hg init` или аналогичной в зависимости от используемой СКВ. После инициализации репозитория разработчик сможет делать коммиты и просматривать историю изменений репозитория. Важно отметить, что репозиторий инициализируется только один раз для каждого проекта.

1. Внесение изменений в файлы.

   Разработчик вносит изменения в файлы проекта. Это могут быть новые функции, исправления ошибок или другие изменения. Изменения могут быть внесены с помощью любого текстового редактора или интегрированной среды разработки (IDE). После внесения изменений разработчик сохраняет файл.

1. Добавление файлов.

   Разработчик добавляет файлы проекта в список подготовленных для сохранения в репозитории. Это можно сделать с помощью команды `git add`, `hg add` или аналогичной в зависимости от используемой СКВ.  

1. Коммит изменений.

   Разработчик фиксирует изменения в файлах, создавая коммит. Это можно сделать с помощью команды `git commit`, `hg commit` или аналогичной в зависимости от СКВ. В коммите разработчик указывает, какие файлы были изменены, и краткое описание изменений. Это позволит легче ориентироваться в сохраненных изменениях в случае необходимости.

1. Отправка изменений на сервер.

   Разработчик отправляет изменения на сервер. Это можно сделать с помощью команд `git push`, `hg push` или аналогичных в зависимости от СКВ. С этого момента внесенные изменения могут увидеть другие разработчики и выполнить ревью. На этом этапе разработчик может вернуться ко второму пункту и внести в файлы дополнительные правки при необходимости.

1. Объединение изменений.

   Когда изменения проверены и одобрены, разработчик вливает их в репозиторий. Это можно сделать с помощью команд `git merge`, `hg merge` или аналогичных в зависимости от СКВ. Теперь в исходный код добавлены правки разработчика.

1. Просмотр истории изменений.

   Разработчик может просмотреть историю изменений, чтобы увидеть, кто и когда внес изменения в конкретный файл. Это может быть полезно для отслеживания ошибок или для улучшения процесса разработки. Это можно сделать с помощью команд `git log`, `hg log` или аналогичных в зависимости от СКВ.

### Инструменты для работы с системой контроля версий {#tools}

Для работы с СКВ существует множество инструментов, которые можно разделить на следующие категории:

* **IDE**

   Интегрированные среды разработки — это программы, которые объединяют в себе редактор кода, компилятор и другие инструменты для разработки ПО. Некоторые IDE имеют встроенные инструменты для работы системами контроля версий, что позволяет разработчикам легко интегрировать их в свой рабочий процесс.

   Популярные IDE, которые имеют встроенные инструменты для работы с СКВ:

    * **[Visual Studio Code](https://code.visualstudio.com/)** — это бесплатная IDE с открытым исходным кодом от Microsoft. Visual Studio Code поддерживает Git, Mercurial и Subversion, имеет множество расширений и удобный интерфейс.

    * **[IntelliJ IDEA](https://www.jetbrains.com/ru-ru/idea/)** — это платная IDE, которая поддерживает Git, Mercurial и Subversion. IntelliJ IDEA помогает выполнять разработку ПО, включая рефакторинг, отладку и анализ кода.

    * **[Eclipse](https://www.eclipse.org/)** — это бесплатная IDE с открытым исходным кодом, которая поддерживает Git и Mercurial. В Eclipse множество инструментов для разработки, включая поддержку различных языков программирования и фреймворков.

* **Консольные клиенты**

   Консольные клиенты — это программы, которые позволяют работать с СКВ из командной строки. Консольные клиенты предоставляют более широкий набор функций и возможностей, чем IDE, но требуют более глубоких знаний о системах контроля версий. Они могут быть полезны для опытных разработчиков, которые хотят получить полный контроль над процессом разработки.

   Популярные консольные клиенты для работы с СКВ:

    * **[Git Bash](https://git-scm.com/about)** — это бесплатный консольный клиент, который позволяет выполнять все основные операции с Git, такие как клонирование репозиториев, создание коммитов и слияние веток. Git Bash поддерживает множество платформ и ОС. У него множество документации и руководств, поэтому пользователям легче найти ответы на возникающие в процессе работы вопросы. Но при этом Git Bash может быть сложным для пользователей без опыта и требует специального изучения.

    * **[Mercurial Workbench](https://www.mercurial-scm.org/)** — это консольный клиент для Mercurial. У него более простой и понятный графический интерфейс, чем Git Bash. Но он менее популярен, чем Git Bash. Из-за этого пользователям Mercurial Workbench может быть сложнее найти документацию и поддержку.

    * **[TortoiseSVN](https://tortoisesvn.net/)** — это консольный клиент для Subversion. Он используется значительно реже, чем Git Bash и Mercurial Workbench, поэтому пользователям может быть сложно найти поддержку или необходимую документацию.

* **Веб-интерфейсы**

   Веб-интерфейсы — это онлайн-сервисы, которые обеспечивают работу с СКВ через браузер. Их использование может быть удобным для совместной работы над проектом. Также веб-интерфейсы могут быть полезны для небольших команд или для тех, кто не хочет устанавливать дополнительное ПО на свой компьютер. Однако у веб-интерфейсов обычно меньше инструментов, чем у консольных клиентов.

   Популярные веб-интерфейсы для работы с СКВ:

    * **[GitHub](https://github.com/)** — сервис для Git с системой отслеживания ошибок и управления задачами, с возможностью создания вики и другими инструментами. Также GitHub предоставляет возможности для коммерческой разработки. При этом он может быть сложным в настройке и использовании для новых пользователей.

    * **[GitLab](https://about.gitlab.com/)** — сервис для Git с большим набором инструментов. Имеет множество функций и возможностей для разработки и обеспечения безопасности, но может быть сложным в использовании и настройке для новых пользователей.

    * **[Bitbucket](https://bitbucket.org/)** — сервис для Git и Mercurial, может управлять задачами, отслеживать проблемы и создавать вики. Bitbucket более простой в использовании, чем GitHub, но имеет меньше функций и возможностей.

Выбор инструмента для работы с СКВ зависит от потребностей разработчика и проекта. IDE могут быть полезны для начинающих разработчиков, консольные клиенты — для опытных разработчиков, а веб-интерфейсы — для небольших команд или для тех, кто не хочет устанавливать дополнительное программное обеспечение на свой компьютер.

## Технологии контроля версий в {{ yandex-cloud }} {#vcs-yc}

Для управления репозиториями с кодом {{ yandex-cloud }} предоставляет сервис {{ mgl-full-name }}.
{{ mgl-name }} позволяет настроить развертывание приложений на [виртуальных машинах](../compute/concepts/vm.md) [{{ compute-full-name }}](../compute/), а также поддерживает интеграцию с [{{ container-registry-full-name }}](../container-registry/) и [{{ managed-k8s-full-name }}](../managed-kubernetes/).

Чтобы начать использовать контроль версий в {{ yandex-cloud }} для работы над проектом, [создайте локальную копию репозитория](../managed-gitlab/quickstart.md) на вашем ПК.

## Полезные ссылки {#links}

* [Бесплатный курс «Основы работы с Git»](https://practicum.yandex.ru/git-basics/?from=catalog)
* [Статья о GitLab и облачном сервисе для работы с ним](https://cloud.yandex.ru/ru/blog/posts/2023/07/managed-gitlab)
* [Статья о построении безопасного процесса разработки в {{ yandex-cloud }}](https://cloud.yandex.ru/ru/blog/posts/2023/05/devsecops-and-compliance)
* [Вебинар о CI/CD в Облаке с помощью GitLab](https://www.youtube.com/watch?v=Ngadh9T2dOI)
* [Инструкция по работе с Git в Yandex DataSphere](../datasphere/operations/projects/work-with-git.md)
